<div class = "sh-container">
  <h1><%= @company.name %></h1>
  <h2> Menu </h2><br>
  <div class="sh-searchform">
    <input type="text" name="search" autocomplete=”off” id="sh-input"
    onkeyup="searchbar()" placeholder="Search">
  </div><br>
  <div class = "sh-cards row" id="wrapper">
    <% @menus.each do |menu|  %>
      <div class="sh-card col-sm-6 col-md-4 col-xl-2 list">
          <p><strong><%= menu.subtitle %></strong></p>
          <div class="sh-items">
              <% @items.each do |item|  %>
                <% if item.menu_id == menu.id %>
                  <div class="sh-items-li">
                    <div class="sh-item-name">
                      <p><strong><%= item.name %></p><p>$<%= item.price %></strong></p>
                    </div>
                    <p><%= item.description %></p>
                  </div>
                <% end %>
              <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
<script>
  function searchbar() {
    let userInput, listedProductsId, userInputCapitalized, listedProduct;    
    
    userInput = document.getElementById('sh-input'); 
    userInputCapitalized = userInput.value.toUpperCase();      
    
    listedProductsId = document.getElementById("wrapper");
    listedProduct = listedProductsId.getElementsByClassName("list");        
    
    for (let i = 0; i < listedProduct.length; i++) {
      taglist = listedProduct[i].getElementsByTagName("p");
      
      a = taglist[0].innerText.toUpperCase().indexOf(userInputCapitalized)
      b = taglist[1].innerText.toUpperCase().indexOf(userInputCapitalized)
      c = taglist[2].innerText.toUpperCase().indexOf(userInputCapitalized)
      d = taglist[3].innerText.toUpperCase().indexOf(userInputCapitalized)

      if ( (a > -1) || (b > -1) || (c > -1) || (d > -1)){
        listedProduct[i].style.display = "";
      }else{
        listedProduct[i].style.display = "none";
      }
    }
  }
</script>
